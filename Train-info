import axios from "axios";
import * as cheerio from "cheerio";

export default async function handler(req, res) {
  try {
    const { train } = req.query;
    if (!train) return res.status(400).json({ error: "Train number required" });

    const url = `https://erail.in/train-enquiry/${train}`;
    const response = await axios.get(url);
    const $ = cheerio.load(response.data);

    const trainName = $("title").text();
    res.status(200).json({ trainNo: train, trainName });
  } catch (error) {
    res.status(500).json({ error: "Failed to fetch train info" });
  }
}
